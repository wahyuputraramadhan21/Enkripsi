<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üîê Caesar Cipher Tool</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      background-color: #f4f4f4;
      color: #111;
      max-width: 600px;
      margin: auto;
      box-sizing: border-box;
      transition: background-color 0.3s, color 0.3s;
    }

    h2 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.nav-links a {
  margin-right: 1rem;
  text-decoration: none;
  color: inherit;
  font-weight: bold;
}

.toggle-mode {
  background: none;
  border: none;
  font-size: 0.9rem;
  cursor: pointer;
  color: inherit;
}

    input, textarea, select, button {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.5rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    .result {
      background-color: #f0f0f0;
      padding: 0.75rem;
      margin-top: 1rem;
      white-space: pre-wrap;
      border-radius: 5px;
      font-size: 1rem;
    }

    button {
      margin-top: 1rem;
      cursor: pointer;
    }

    .toggle-mode {
      float: right;
      font-size: 0.9rem;
      background: none;
      border: none;
      color: inherit;
      cursor: pointer;
    }

    /* DARK MODE */
    .dark-mode {
      background-color: #121212;
      color: #fff;
    }

    .dark-mode input,
    .dark-mode textarea,
    .dark-mode select {
      background-color: #1e1e1e;
      color: #fff;
      border: 1px solid #444;
    }

    .dark-mode .result {
      background-color: #2a2a2a;
    }

    .dark-mode input::placeholder,
    .dark-mode textarea::placeholder {
      color: #aaa;
    }

    /* Modal Overlay */
.modal {
  display: none; 
  position: fixed; 
  z-index: 1000; 
  left: 0; top: 0; 
  width: 100%; height: 100%; 
  background-color: rgba(0,0,0,0.6);
  justify-content: center; 
  align-items: center;
}

/* Modal Box */
.modal-content {
  position: relative;      /* supaya tombol ‚ùå bisa absolute di dalamnya */
  background: #fff;
  padding: 1.5rem;
  border-radius: 8px;
  max-width: 400px;
  width: 90%;
  color: #111;
  box-sizing: border-box;
}

.dark-mode .modal-content {
  background: #1e1e1e;
  color: #fff;
}

.modal-content h3 {
  margin-top: 0;
  font-size: 1.2rem;
}

.modal-content p {
  margin: 0.5rem 0;
  word-break: break-word;
}

.modal-content button {
  margin-top: 0.5rem;
}

/* Reset margin supaya judul gak dorong tombol ke bawah */
.modal-content h3 {
  margin: 0 0 1rem 0;
  font-size: 1.2rem;
}

.close-btn {
  position: absolute;
  top: 10px;    /* jarak dari atas */
  right: 10px;  /* jarak dari kanan */
  font-size: 1rem;
  background: none;
  border: none;
  color: inherit;
  cursor: pointer;
  line-height: 1;
}

.close-btn:hover {
  color: red;
}

/* Toast Notification */
.toast {
  visibility: hidden;
  min-width: 200px;
  background-color: #4CAF50;
  color: white;
  text-align: center;
  border-radius: 8px;
  padding: 0.75rem;
  position: fixed;
  z-index: 2000;
  left: 50%;
  bottom: 30px;
  transform: translateX(-50%);
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.5s, bottom 0.5s;
}

.toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 50px;
}

/* Ikon centang animasi */
.toast .checkmark {
  font-size: 1.2rem;
  animation: pop 0.4s ease forwards;
}

@keyframes pop {
  0% { transform: scale(0.5); opacity: 0; }
  80% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); }
}


    @media (max-width: 600px) {
      nav {
        flex-direction: column;
        align-items: flex-start;
      }
      .toggle-mode {
        float: none;
        margin-top: 0.5rem;
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
  <div>
    <a href="index.html">AES</a>
    <a href="caesar.html">Caesar</a>
  </div>
  <button style="border: 1px solid #111;" class="toggle-mode" onclick="toggleMode()">üåô Toggle Mode</button>

  </nav>


  <h2>üîê Caesar Cipher</h2>

  <label for="mode">Pilih Mode:</label>
  <select id="mode">
    <option value="encrypt">Enkripsi</option>
    <option value="decrypt">Dekripsi</option>
  </select>

  <label for="shift">Shift (misal: 3 atau -2):</label>
  <input type="number" id="shift" value="3" />

  <label for="inputText">Masukkan Teks:</label>
  <textarea id="inputText" rows="4" placeholder="Contoh: Halo Dunia!"></textarea>

  <button onclick="runCaesar()">üîÅ Proses</button>

  <div class="result" id="outputText"></div>
  <button onclick="copyResult()">üìã Salin Hasil</button>

  <!-- Toast Notification -->
<div id="toast" class="toast">
  <span class="checkmark">‚úÖ</span> Hasil berhasil disalin!
</div>


<!-- Modal Popup -->
<div id="resultModal" class="modal">
  <div class="modal-content" style="position: relative;">
    <h3 id="modalTitle">Hasil</h3>
    <p><b>Data Awal:</b> <span id="modalInput"></span></p>
    <p><b>Shift:</b> <span id="modalShift"></span></p>
    <p><b>Hasil:</b> <span id="modalOutput"></span></p>
    <button onclick="copyResult()">üìã Salin Hasil</button>
    <button onclick="closeModal()">‚úÖ Selesai</button>
  </div>
</div>


  <script>
    function caesar(text, shift) {
      let result = "";
      for (let i = 0; i < text.length; i++) {
        let code = text.charCodeAt(i);
        let shifted = (code + shift + 256) % 256; // Full ASCII (0‚Äì255)
        result += String.fromCharCode(shifted);
      }
      return result;
    }
function runCaesar() {
  const text = document.getElementById("inputText").value;
  const shiftValue = parseInt(document.getElementById("shift").value);
  const mode = document.getElementById("mode").value;
  const shift = mode === "encrypt" ? shiftValue : -shiftValue;

  const output = caesar(text, shift);

  // Isi ke div lama (biar tetap ada)
  document.getElementById("outputText").textContent =
    `Hasil (${mode === "encrypt" ? "Enkripsi" : "Dekripsi"}):\n${output}`;

  // Isi ke modal
  document.getElementById("modalTitle").textContent =
    `Hasil ${mode === "encrypt" ? "Enkripsi" : "Dekripsi"}`;
  document.getElementById("modalInput").textContent = text;

  // Tambahan shift dengan arah
  let shiftInfo = shiftValue > 0 
    ? `+${shiftValue} (geser ke kanan)` 
    : `${shiftValue} (geser ke kiri)`;
  document.getElementById("modalShift").textContent = shiftInfo;

  document.getElementById("modalOutput").textContent = output;

  // Tampilkan modal
  document.getElementById("resultModal").style.display = "flex";
}


   function copyResult() {
  const output = document.getElementById("modalOutput").textContent;
  if (!output.trim()) {
    showToast("Tidak ada teks untuk disalin!", false);
    return;
  }
  navigator.clipboard.writeText(output).then(() => {
    showToast("Hasil berhasil disalin!", true);
  }).catch(err => {
    showToast("Gagal menyalin: " + err, false);
  });
}

function showToast(message, success = true) {
  const toast = document.getElementById("toast");
  toast.innerHTML = success 
    ? `<span class="checkmark">‚úÖ</span> ${message}`
    : `<span style="color:yellow">‚ö†Ô∏è</span> ${message}`;

  toast.style.backgroundColor = success ? "#4CAF50" : "#e74c3c";
  toast.className = "toast show";

  setTimeout(() => {
    toast.className = "toast";
  }, 2500);
}

function closeModal() {
  document.getElementById("resultModal").style.display = "none";
}

// Tutup modal kalau klik area luar kotak
window.onclick = function(event) {
  const modal = document.getElementById("resultModal");
  if (event.target === modal) {
    modal.style.display = "none";
  }
};

  </script>
</body>
</html>


